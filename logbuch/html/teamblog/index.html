<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/> 
	<title>LogBuch TeamBlog</title>
	<style type="text/css"> 
	  @import "dojo/dijit/themes/claro/claro.css";
	  @import "dojo/dojox/editor/plugins/resources/css/PasteFromWord.css";
	  @import "dojo/dojox/grid/resources/Grid.css";
	  @import "dojo/dojox/grid/resources/claroGrid.css";
	  @import "querybox/css/querybox.css";
	  @import "lib/dowl/Notification.css";
	  @import "style.css";
	</style>	
	<script src="dojo/dojo/dojo.js"
		data-dojo-config="isDebug: true, parseOnLoad: true">
	</script>
	<script type="text/javascript" src="querybox/js/marumushi.widget.querybox.js"></script>
	<script src="rangy/rangy-core.js"></script>
	<script src="teamblog.js"></script>
</head>

<body class="claro">

  <!----------------------- layout container ----------------------->
	<div id="appLayout" class="demoLayout" style="visibility: hidden"
		data-dojo-type="dijit.layout.BorderContainer"
		data-dojo-props="design: 'headline'">
	
	 
		<!---------------------- center column ----------------------->
		<div 
		  id="centerCol"
		  class="centerPanel" 
		  data-dojo-type="dijit.layout.ContentPane"
			data-dojo-props="region: 'center'">
			<div id="newsContainerNode">
			 Nachrichten werden geladen...
			</div>
		</div>
		
		<!----------------------- title bar ----------------------->
		<div class="edgePanel" data-dojo-type="dijit.layout.ContentPane"
			data-dojo-props="region: 'top'">
			<table width="100%">
			 <tr heigth="0px">
			   <td width="70%"><span style="font-size:16px;font-weight:bold">LogBuch TeamBlog</span></td>
			   <td width="20%"><span id="username">XXX</span></td>
			   
			   <td><button dojoType="dijit.form.Button" onClick="logout();">Abmelden</button></td>
			 </tr>
			</table>
		</div>
			
		<!----------------------- left column ----------------------->
		<div id="leftCol" class="edgePanel"
			data-dojo-type="dijit.layout.ContentPane"
			data-dojo-props="region: 'left'">
			
		<!-- Search Box -->
		<div id="qbox"></div>
			
    <!-- column header -->    
    <div class="column-header">Einträge filtern</div>		
			
		<!-- Time period -->
		  <div 
		    dojoType="dijit.TitlePane" title="Zeitraum" open="false">
		   <table>
		     <tr>
		       <td><label for="filter-date-from">Von:</label></td>
		       <td>
		        <input id="filter-date-from"
		          dojoType="dijit.form.DateTextBox" 
		          name="filter-date-from" 
		          onChange="updateFilter(this);">
		       </td>
		     </tr>
		     <tr>
		       <td><label for="filter-date-to">Bis:</label></td>
		       <td>
		        <input id="filter-date-to"
		          dojoType="dijit.form.DateTextBox"
		          name="filter-date-to"
		          onChange="updateFilter(this);">
		        </td>
		     </tr>            
		   </table>
		   <button dojoType="dijit.form.Button" onClick="resetTimeFilter()">Zurücksetzen</button>
		 </div>
           
		<!-- Categories -->
		<div dojoType="dijit.TitlePane" title="Kategorie" open="false">
        <table>
        
           <tr><td>
            <input id="filter-categories-all"
              dojoType="dijit.form.CheckBox" 
              onChange="toggleFilter(this,'filter_category')" 
              checked="true">
          </td><td>
            <label for="filter-group-1">Alle</label><br/>
          </td></tr>
                  
          <tr><td>
            <input  id="filter-event" 
              dojoType="dijit.form.CheckBox" 
              name="filter_category" 
              value="event"
              onChange="updateFilter(this);">
          </td><td>
            <label for="filter-event">Termine</label><br/>
          </td></tr>

          <tr><td>
            <input 
              dojoType="dijit.form.CheckBox" 
              id="filter-document" name="filter_category" 
              value="document"
              onChange="updateFilter(this);">
          </td><td>
            <label for="filter-document">Dokumente</label><br/>
          </td></tr>

          <tr><td>
            <input 
              dojoType="dijit.form.CheckBox" 
              id="filter-minutes" 
              name="filter_category" 
              value="minutes"
              onChange="updateFilter(this);">
          </td><td>
            <label for="filter-minutes">Protokolle</label><br/>
          </td></tr>
          
          <tr><td>
            <input 
              dojoType="dijit.form.CheckBox" 
              id="filter-consult" 
              name="filter_category" 
              value="consult"
              onChange="updateFilter(this);">
          </td><td>
            <label for="filter-consult">Beratungsprozesse</label><br/>
          </td></tr>

          <tr><td>
            <input 
              dojoType="dijit.form.CheckBox" 
              id="filter-result" 
              name="filter_category" 
              value="result"
              onChange="updateFilter(this);">
          </td><td>
             <label for="filter-result">Ergebnisse</label><br/>
          </td></tr>
          
          <tr><td>
            <input 
              dojoType="dijit.form.CheckBox" 
              id="filter-stumble" name="filter_category" value="stumble" 
              onChange="updateFilter(this);">
          </td><td>
             <label for="filter-stumble">Stolpersteine</label><br/>
          </td></tr>
          
          <tr><td>
            <input 
              dojoType="dijit.form.CheckBox" 
              id="filter-hint" name="filter_category" value="hint"
              onChange="updateFilter(this);">
          </td><td>
            <label for="filter-hint">Tipps/Links</label><br/>
          </td></tr>            
          
          <tr><td>
            <input 
              dojoType="dijit.form.CheckBox" 
              id="filter-idea" name="filter_category" value="idea"
              onChange="updateFilter(this);">
          </td><td>
            <label for="filter-idea">Ideen</label><br/>
          </td></tr>                  

          <tr><td>
            <input 
              dojoType="dijit.form.CheckBox" 
              id="filter-coop" name="filter_category" value="coop"
              onChange="updateFilter(this);">
          </td><td>
             <label for="filter-coop">Kooperationen</label><br/>
          </td></tr>            

          <tr><td>
            <input dojoType="dijit.form.CheckBox" 
               id="filter-photo" name="filter_category" value="photo"
               onChange="updateFilter(this);">
          </td><td>
            <label for="filter-photo">Photos</label><br/>
          </td></tr>   

          <tr><td>
            <input dojoType="dijit.form.CheckBox" 
               id="filter-misc" name="filter_category" value="misc"
               onChange="updateFilter(this);">
          </td><td>
            <label for="filter-misc">Sonstiges</label><br/>
          </td></tr>                                     
          
        </table>
		  </div>
		  
		  <!-- group -->
      <div dojoType="dijit.TitlePane" title="Gruppe" open="false">
        <table>
          
           <tr><td>
            <input 
              id="filter-group-all"
              dojoType="dijit.form.CheckBox" 
              onChange="toggleFilter(this,'filter_group');" 
              checked="true">
          </td><td>
            <label for="filter-group-all">Alle</label><br/>
          </td></tr>
          
          <tr><td>
            <input dojoType="dijit.form.CheckBox" 
               id="filter-group-2" name="filter_group" value="ownCompany"
               onChange="updateFilter(this);">
          </td><td>
            <label for="filter-group-2">Eigenes Unternehmen</label><br/>
          </td></tr>
          
          <tr><td>
            <input dojoType="dijit.form.CheckBox" 
               id="filter-group-3" name="filter_group" value="ownConsultant"
               onChange="updateFilter(this);">
          </td><td>
             <label for="filter-group-3">Berater (Eigenes Unternehmen)</label><br/>
          </td></tr>
          
          <tr><td>
            <input dojoType="dijit.form.CheckBox" 
               id="filter-group-4" name="filter_group" value="allConsultants"
               onChange="updateFilter(this);">
          </td><td>
            <label for="filter-group-4">Alle Berater/innen</label><br/>
          </td></tr>                          

          <tr><td>
            <input dojoType="dijit.form.CheckBox" 
               id="filter-group-5" name="filter_group" value="analyst"
               onChange="updateFilter(this);">
          </td><td>
             <label for="filter-group-5">Wissenschaftliche Begleitung</label><br/>
          </td></tr>          

<!--           <tr><td>
            <input dojoType="dijit.form.CheckBox" 
               id="filter-group-7" name="filter_group" value="moreMembers">
          </td><td>
            <label for="filter-group-7">Sonstiges</label><br/>
          </td></tr>   -->                                   
          
        </table>
      </div>		
      
      <!-- Author -->
      <div dojoType="dijit.TitlePane" title="Verfasser/innen" open="false">
        <div> 
	        <table 
	          id="filterAuthorGrid"
	          dojoType="dojox.grid.DataGrid" 
	          autowidth="true" 
	          height="200px"
	          onRowClick="toggleSelectUserTableOnRowClick">
						<thead>
							<tr>							 
								<th field="selected" cellType="dojox.grid.cells.Bool" width="16px" editable="true">☒</th>
								<th field="name" width="60px" formatter="formatUserName">Name</th>
								<th field="organization" width="50px">Firma</th>								
							</tr>
						</thead>	          
	        </table>
        </div>
      </div>
    </div>
			
	  <!----------------------- right column ----------------------->
	  
    <div id="rightCol" class="edgePanel"
      data-dojo-type="dijit.layout.ContentPane"
      data-dojo-props="region: 'right'">
      
      <!-- Toolbar -->
      <div>
				
        <!-- categories --> 
        <div dojoType="dijit.form.DropDownButton">
          <span>Kategorien</span>
          <div dojoType="dijit.TooltipDialog" id="entryCategories" 
            title="Kategorien:" >
            <table>
            
              <tr><td>
                <input 
                  dojoType="dijit.form.CheckBox" 
                  id="c-event" name="categories" value="event"
                  onChange="updateMessageData(this);dojo.style( dojo.byId('timeChooserContainer'), 'display', this.get('value')?'inline':'none' )">
              </td><td>
                <label for="c-event">Termin</label><br/>
              </td></tr>
              
              <tr><td>
                <input 
                  dojoType="dijit.form.CheckBox" 
                  id="c-document" name="categories" value="document"
                  onChange="updateMessageData(this);">
              </td><td>
                <label for="c-document">Dokument</label><br/>
              </td></tr>     
              
              <tr><td>
                <input 
                  dojoType="dijit.form.CheckBox" 
                  id="c-minutes" name="categories" value="minutes"
                  onChange="updateMessageData(this);">
              </td><td>
                <label for="c-minutes">Protokoll</label><br/>
              </td></tr>                          
              
              <tr><td>
                <input dojoType="dijit.form.CheckBox" 
                   id="c-consult" name="categories" value="consult"
                   onChange="updateMessageData(this);">
              </td><td>
                <label for="c-consult">Beratungsprozess</label><br/>
              </td></tr>

              <tr><td>
                <input dojoType="dijit.form.CheckBox" 
                   id="c-result" name="categories" value="result"
                   onChange="updateMessageData(this);">
              </td><td>
                 <label for="c-result">Ergebnis</label><br/>
              </td></tr>
              
              <tr><td>
                <input dojoType="dijit.form.CheckBox" 
                   id="c-stumble" name="categories" value="stumble"
                   onChange="updateMessageData(this);">
              </td><td>
                 <label for="c-stumble">Stolperstein</label><br/>
              </td></tr>
              
              <tr><td>
                <input dojoType="dijit.form.CheckBox" 
                   id="c-hint" name="categories" value="hint"
                   onChange="updateMessageData(this);">
              </td><td>
                <label for="c-hint">Tipps/Links</label><br/>
              </td></tr>                
              
              <tr><td>
                <input dojoType="dijit.form.CheckBox" 
                   id="c-idea" name="categories" value="idea"
                   onChange="updateMessageData(this);">
              </td><td>
                <label for="c-idea">Idee</label><br/>
              </td></tr>                          
    
              <tr><td>
                <input dojoType="dijit.form.CheckBox" 
                   id="c-coop" name="categories" value="coop"
                   onChange="updateMessageData(this);">
              </td><td>
                 <label for="c-coop">Kooperation</label><br/>
              </td></tr>       
              
              <tr><td>
                <input dojoType="dijit.form.CheckBox" 
                   id="c-photo" name="categories" value="photo"
                   onChange="updateMessageData(this);">
              </td><td>
                 <label for="c-photo">Foto</label><br/>
              </td></tr>       
    
              <tr><td>
                <input dojoType="dijit.form.CheckBox" 
                   id="c-misc" name="categories" value="misc"
                   onChange="updateMessageData(this);">
              </td><td>
                <label for="c-misc">Sonstiges</label><br/>
              </td></tr>                                     
              
            </table>
          </div>
        </div>				
        
        <!-- time -->
        <span id="timeChooserContainer" style="display:none">
        <span 
          id="timeChooser"
          dojoType="dijit.form.DropDownButton">
          <span>Zeit</span>
          <span dojoType="dijit.TooltipDialog" id="entryEventTime" title="Zeitinformationen">
            <table>
              <tr>
                <td><label for="entry-date">Datum:</label></td>
                <td><input 
                  dojoType=dijit.form.DateTextBox name="date" id="entry-date"
                  onChange="updateMessageData(this);"></td>
              </tr>
              <tr>
                <td><label for="entry-time-from">Beginnt:</label></td>
                <td><input 
                  dojoType=dijit.form.TimeTextBox name="from" id="entry-time-from"
                  onChange="updateMessageData(this);"></td>
              </tr>
                <tr>
                  <td><label for="entry-time-to">Endet:</label></td>
                  <td><input 
                    dojoType=dijit.form.TimeTextBox name="to" id="entry-time-to"
                    onChange="updateMessageData(this);"></td>
                </tr>               
            </table>
          </span>
        </span>   
        </span>        
				
				<!-- Access -->
	        <div dojoType="dijit.form.DropDownButton">
	          <span>Freigabe</span>
	          <div 
	            id="entryAccess"
	            dojoType="dijit.TooltipDialog" title="Eintrag sichtbar für:">
			        <table>
			          
			          <tr><td>
			            <input dojoType="dijit.form.CheckBox" 
			               id="access-2" name="access" value="ownCompany"
			               onChange="updateMessageData(this);">
			          </td><td>
			            <label for="access-2">Eigenes Unternehmen</label><br/>
			          </td></tr>
			          
			          <tr><td>
			            <input dojoType="dijit.form.CheckBox" 
			               id="access-3" name="access" value="ownConsultant"
			               onChange="updateMessageData(this);">
			          </td><td>
			             <label for="access-3">Berater (Eigenes Unternehmen)</label><br/>
			          </td></tr>
			          
			          <tr><td>
			            <input dojoType="dijit.form.CheckBox" 
			               id="access-4" name="access" value="allConsultants"
			               onChange="updateMessageData(this);">
			          </td><td>
			            <label for="access-4">Alle Berater/innen</label><br/>
			          </td></tr>                          
			
			          <tr><td>
			            <input dojoType="dijit.form.CheckBox" 
			               id="access-5" name="access" value="analyst"
			               onChange="updateMessageData(this);">
			          </td><td>
			             <label for="access-5">Wissenschaftliche Begleitung</label><br/>
			          </td></tr>       
			          
			          <tr><td>
			            <input dojoType="dijit.form.CheckBox" 
			               id="access-6" name="access" value="allMembers"
			               onChange="updateMessageData(this);">
			          </td><td>
			            <label for="access-6">Alle</label><br/>
			          </td></tr>       
			
		           <tr><td>
			            <input dojoType="dijit.form.CheckBox" 
			               id="access-7" name="access" value="moreMembers" 
			               onChange="updateMessageData(this);if(this.get('value'))dijit.byId('chooseUsersDialog').show()" />
			          </td><td>
			            <label for="access-7">Einzelne Teilnehmer</label><br/>
			          </td></tr>                                  
			          
			        </table>
	          </div>
	        </div>
	          
	        <!-- uploader -->
	        <div
	           id="entryAttachmentUploader" 
	           dojoType="dijit.form.DropDownButton">
	            <span><img src="attachment.png"/></span>
	            <div 
	              dojoType="dijit.TooltipDialog" id="tooltipDlg4" title="Kategorien:"
	              style="width:300px">
				        <form method="post" action="UploadFile.php" id="myForm"
				          enctype="multipart/form-data" >
				            <fieldset >
				                <legend>Dateien hochladen</legend>
				                <input name="uploadedfile" multiple="true" type="file" id="uploader"
				                style="width:250px"
				                  dojoType="dojox.form.Uploader" label="Dateien auswählen" >
				                <input type="submit" label="Submit" dojoType="dijit.form.Button" />
				                <div id="files" dojoType="dojox.form.uploader.FileList"
				                uploaderId="uploader"></div>
				            </fieldset>
				        </form> 
				    </div>        
					</div>  
				</div>    

        
        <!-- Message Editor -->
        <div 
          id="entryEditor"
          data-dojo-type="dijit.Editor"
          data-dojo-props="plugins:['insertUnorderedList','createLink','pastefromword','fullscreen']">
        </div>
        
        <!-- send button -->
        <div id="submitEntryContainer">
          <button id="submitEntryButton" 
            dojoType="dijit.form.Button" 
            onClick="submitEntry();"
            disabled="true">Senden</button>
          <button id="cancelEntryButton" 
            dojoType="dijit.form.Button" 
            onClick="resetEditor();">Abbrechen</button>  
        </div>
        
        <!-- Informational message -->
        <p id="entryInformationMessage" class="infoText"></p>
              
    </div>		
   <!----------------------- footer ----------------------->
    
    <div id="footer" class="edgePanel"
      data-dojo-type="dijit.layout.ContentPane"
      data-dojo-props="region: 'bottom'">
      <button
        id="reloadEntriesButton"
        dojoType="dijit.form.Button" 
        onClick="loadEntries();">Einträge neu laden</button>
      <button id="adminButton" 
        dojoType="dijit.form.Button" 
        onClick="alert('noch nicht implementiert');"
        disabled="true">Admin</button>
      <button id="calenderButton" 
        dojoType="dijit.form.Button" 
        onClick="alert('noch nicht implementiert');">Kalender</button>  
    </div> 	
	</div>
	
	<!----------------------- login dialog ----------------------->
	<div dojoType="dijit.Dialog" id="loginDialog" title="LogBuch TeamBlog: Bitte anmelden"
	    execute="authenticate(arguments[0].name +','+arguments[0].password);">
	  <table>
	    <tr>
	      <td><label for="name">Name: </label></td>
	      <td><input dojoType="dijit.form.TextBox" type="text" name="name" id="name"></td>
	    </tr>
	    <tr>
	      <td><label for="loc">Passwort: </label></td>
	      <td><input dojoType="dijit.form.TextBox" type="password" name="password" id="password"></td>
	    </tr>
	    <tr>
	      <td colspan="2" align="center">
	        <button dojoType="dijit.form.Button" type="submit">Anmelden</button></td>
	    </tr>
	  </table>
	</div>	
	
	<!----------------------- choose user(s) dialog ----------------------->
  <div dojoType="dijit.Dialog" 
    id="chooseUsersDialog" 
    title="Bitte Benutzer/innen auswählen"
    execute="updateMessageData(this);">
    <table 
      id="chooseUsersGrid"
      dojoType="dojox.grid.DataGrid" 
      autoWidth="true" 
      height="300px"
      onRowClick="toggleSelectUserTableOnRowClick">
      <thead>
        <tr>
          <th field="selected" cellType="dojox.grid.cells.Bool" width="16px" editable="true">☒</th>
          <th field="name" width="200px">Name</th>
          <th field="organization" width="200px">Firma</th>
          <th field="online" width="50px" width="100px" formatter="getOnlineStatusHtml">Online</th>
        </tr>
      </thead>             
    </table>
    <button dojoType="dijit.form.Button" type="submit">Schließen</button>
  </div>  
	

	
</body>
</html>